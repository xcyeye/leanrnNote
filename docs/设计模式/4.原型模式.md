# 原型模式

> 原型模式使用深拷贝或者浅拷贝基于原型类对象进行拷贝就行，一般都使用深拷贝

如果对象的创建成本比较大，而同一个类的不同对象之间差别不大（大部分字段的值都相同），在这种情况下，我们可以利用对已有对象(原型)进行复制（或者叫拷贝）的方式来创建新对象，以达到节省时间的目的，这种基于原型来创建对象的方式称为`原型设计模式(Prototype Design Pattern)`



深拷贝：将一个对象(如hashtable)拷贝到另一个hashtable对象，深拷贝就是，新hashtable对象中的某个键所对应的值对象是完全新的对象

浅拷贝：将一个对象(如hashtable)拷贝到另一个hashtable对象，浅拷贝就是，新hashtable对象中的某个键所对应的值对象的引用是在旧hashtable中该键所对应的值引用，如果在旧hashtable中修改该键所对应的值对象的某个值，新hashtable也会发生改变

![image-20220721231353494](https://picture.xcye.xyz/image-20220721231353494.png)

## 两种实现方法

原型模式有两种实现方法，分别是深拷贝和浅拷贝

浅拷贝只会复制对象中基本数据类型数据和引用对象的`内存地址`，不会递归地复制引用对象，以及引用对象的引用对象.....而深拷贝得到的是一根完完全全独立的对象

> 深拷贝比起浅拷贝来说，更加耗时，更加耗内存空间



如果要拷贝的对象是不可变对象，浅拷贝共享不可变对象是没问题的，但对于可变对象来说，浅拷贝得到的对象和原始对象会共享部分数据，就有可能出现数据被修改的风险，也就变得复杂多了

如果要从数据库中加载10万条数据并构建散列表索引，操作非常耗时，比较推荐使用浅拷贝，否则，没有充分理由，不能为了一点点性能提升而使用浅拷贝



